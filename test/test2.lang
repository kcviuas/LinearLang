letLin x = newRes("aaa")
letLin y = newRes("bbb")
letUn ff = fun (xx:LinRes){
    xx
}

begin
    if eq?(2,3)
    then 
        begin freeAtom(x); freeAtom(y) end
    else 
        begin freeAtom(y); freeAtom(x) end;

    letLin xa = newRes("xxx")
    letLin ya = ff(xa)
    letLin ll = linCons(ya,null)
    if-null ll
    then freeList(ll)
    else split ll as carx cdrx
         copyAtom carx as xx1 xx2
         copyList cdrx as yy1 yy2
         letLin rt1 = linCons(xx1,yy1)
         letLin rt2 = linCons(xx2,yy2)
         begin
            freeList(rt1);
            freeList(rt2)
         end;
    letLin vv = newRes("vv")
    freeAtom(vv);

    letLin zz = newRes("zzz")
    letLin zza = linCons(zz,null)
    split zza as caa cbb
    begin
        freeAtom(caa);
        freeList(cbb)
    end;

    letUn fact = fix fun (f:Arrow(Number,Number)){
        fun (x:Number){
            if eq?(x,1) 
            then 1
            else mul(x,f(sub(x,1)))
        }
    }
    fact(5)
end

